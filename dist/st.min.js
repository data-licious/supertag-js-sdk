!function(e,t,a,r){"use strict";var n,o,i,s,u,p,l,c,_,d,T,A,P,v;o="https://app.supert.ag/api/",i=["dataFilter"],s=function(e){throw"ERROR: SuperTag JS SDK: "+e},u=function(e){for(var t,a,r,n,o,i,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",p="",l=0;l<e.length;)t=e.charCodeAt(l++),a=e.charCodeAt(l++),r=e.charCodeAt(l++),n=t>>2,o=(3&t)<<4|a>>4,i=(15&a)<<2|r>>6,s=63&r,isNaN(a)?i=s=64:isNaN(r)&&(s=64),p+=u.charAt(n)+u.charAt(o)+u.charAt(i)+u.charAt(s);return p},p=function(t){return r===e.JSON&&s("[Polyfill] for JSON must be provided."),e.JSON.stringify(t)},l=function(t){return r===e.JSON&&s("[Polyfill] for JSON must be provided."),e.JSON.parse(t)},c=function(e,t){r===t&&s("["+e+"] must be provided.")},_=function(e,t){return c(e,t),t!==parseInt(t)?s("["+e+"] must be an integer."):void 0},d=function(e,t){return c(e,t),"string"!==a.type(t)?s("["+e+"] must be a string."):void 0},T=function(e,t,r){return c(e,t),a.isArray(t)?!0===r&&0===t.length?s("["+e+"] must not be empty."):void 0:s("["+e+"] must be an array.")},A=function(e,t){c(e,t),t&&!a.isPlainObject(t)&&s("["+e+"] must be a plain object.")},P=function(e,t,r){d(e,t),T("Options",r);for(var n=0;n<r.length;n++)d("Option",r[n]);~a.inArray(t,r)||s("["+e+"] is not valid. Options are ["+r.join(", ")+"].")},v=function(e){A("Ajax options",e),a.each(e,function(e){~a.inArray(e,i)||s("["+e+"] is not a supported Ajax option.")})},n=function(){function e(e){A("SDK argument",e),d("Token",e.token),this.basicAuth=u("token:"+e.token),this.baseUrl=e.baseUrl||o,d("Base URL",this.baseUrl)}return e.error=s,e.jsonEncode=p,e.jsonDecode=l,e.validateDefined=c,e.validateInt=_,e.validateStr=d,e.validateArr=T,e.validatePlainObj=A,e.validateOpts=P,e.prototype.get=function(e,t,a){return this.ajax(this.getEndpoint(e,t),"GET",null,a)},e.prototype.post=function(e,t,a,r){return this.ajax(this.getEndpoint(e,t),"POST",a,r)},e.prototype.put=function(e,t,a,r){return this.ajax(this.getEndpoint(e,t),"PUT",a,r)},e.prototype["delete"]=function(e,t,a){return this.ajax(this.getEndpoint(e,t),"DELETE",null,a)},e.prototype.getEndpoint=function(e,t){return d("URI",e),t&&A("Query parameters",t),this.baseUrl+e+(t?"?"+a.param(t):"")},e.prototype.ajax=function(e,t,n,o){var e=e||this.baseUrl,t=t||"GET",i={"Content-Type":"application/json",Authorization:"Basic "+this.basicAuth},s={url:e,method:t,headers:i,dataType:"json"};return r!==n&&null!==n&&(A("Data",n),s.data=p(n)),r!==o&&(v(o),a.extend(s,o)),a.ajax(s)},e}(),e.StSDK=n}(window,document,jQuery),function(e,t,a,r){"use strict";var n=e.StSDK;n.APP_TEMPLATE_FORMAT_FLAT="flat",n.APP_TEMPLATE_FORMAT_GROUPED="grouped",n.APP_TEMPLATE_FORMAT_GROUPED_APP_ONLY="grouped_app_only",n.APP_TEMPLATE_FORMAT_GROUPED_VENDOR_ONLY="grouped_vendor_only",n.APP_TEMPLATE_FORMAT_STANDARD="standard",n.APP_TEMPLATE_FORMAT_STANDARD_VENDOR_ONLY="standard_vendor_only",n.prototype.getAppTemplate=function(e){return n.validateInt("App template ID",e),this.get("app-templates/"+e)},n.prototype.createAppTemplate=function(e){return n.validatePlainObj("App template data",e),this.post("app-templates",null,e)},n.prototype.updateAppTemplate=function(e,t){return n.validateInt("App template ID",e),n.validatePlainObj("App template data",t),this.put("app-templates/"+e,null,t)},n.prototype.deleteAppTemplate=function(e){return n.validateInt("ID",e),this["delete"]("app-templates/"+e)},n.prototype.getAppTemplates=function(e){var e=e||n.APP_TEMPLATE_FORMAT_FLAT;return n.validateOpts("Format",e,[n.APP_TEMPLATE_FORMAT_FLAT,n.APP_TEMPLATE_FORMAT_GROUPED,n.APP_TEMPLATE_FORMAT_GROUPED_APP_ONLY,n.APP_TEMPLATE_FORMAT_GROUPED_VENDOR_ONLY,n.APP_TEMPLATE_FORMAT_STANDARD,n.APP_TEMPLATE_FORMAT_STANDARD_VENDOR_ONLY]),this.get("app-templates",null,{dataFilter:function(t,r){if(n.APP_TEMPLATE_FORMAT_FLAT===e||"json"!==r)return t;var o={},i={},s={},u=[],p=[],l=n.jsonDecode(t);return a.each(l,function(t,r){var u=r.vendor.toLowerCase(),p=r.platform.toLowerCase(),l=r.id,c={};u in o?p in o[u]?o[u][p].push(r):o[u][p]=[r]:(o[u]={},o[u][p]=[r]),u in s?s[u].push(r):s[u]=[r],n.APP_TEMPLATE_FORMAT_GROUPED_APP_ONLY===e&&(a.each(r.tag_templates,function(e,t){t.id in c||(c[t.id]=t)}),delete r.tag_templates,r.tag_templates=c,l in i||(i[l]=r))}),n.APP_TEMPLATE_FORMAT_GROUPED===e?n.jsonEncode(o):n.APP_TEMPLATE_FORMAT_GROUPED_APP_ONLY===e?n.jsonEncode(i):n.APP_TEMPLATE_FORMAT_GROUPED_VENDOR_ONLY===e?n.jsonEncode(s):n.APP_TEMPLATE_FORMAT_STANDARD===e?(a.each(o,function(e,t){var r=[];a.each(t,function(e,t){r.push({name:e,applications:t})}),u.push({name:e,platforms:r})}),n.jsonEncode(u)):(a.each(s,function(e,t){p.push({vendor:e,applications:t})}),n.jsonEncode(p))}})}}(window,document,jQuery),function(e){"use strict";var t=e.StSDK;t.prototype.getCompany=function(e){return t.validateInt("Company ID",e),this.get("companies/"+e)}}(window),function(e){"use strict";function t(e){switch(e){case"cookie_parameter_variable":return"cookie_name";case"element_text_variable":return"element_selector";case"javascript_variable":case"special_javascript_value_variable":return"variable_name";case"query_parameter_variable":return"query_string_key";case"double_click_advertiser_id_variable":case"string_variable":return"value";case"referrer_parameter_variable":return"referrer_parameter_key";case"variable_template_variable":return"parameter_value";case"affinity_group_variable":return"";case"rule_bound_variable":return"";default:return""}}function a(e){var t=[{type:"javascript_variable",name:"JavaScript",paramName:"Javascript Code"},{type:"variable_template_variable",name:e.vendor,parameterName:e.parameter_name},{type:"query_parameter_variable",name:"Query parameter",paramName:"Parameter Name"},{type:"cookie_parameter_variable",name:"Cookie parameter",paramName:"Cookie Name"},{type:"element_text_variable",name:"Element text",paramName:"Element Selector"},{type:"string_variable",name:"String",paramName:"String"},{type:"referrer_parameter_variable",name:"Referrer parameter",paramName:"Parameter Name"},{type:"double_click_advertiser_id_variable",name:"Advertiser ID",paramName:"Advertiser ID"},{type:"double_click_advertiser_id_variable",name:"Generic",paramName:"Advertiser ID"},{type:"rule_bound_variable",name:"Rule bound",paramName:"Default"}],a=$.grep(t,function(t){return t.type==e.type});if(!a.length)throw"Undefined type";return a[0]}var r=e.StSDK;r.prototype.getProjectDataObjects=function(e){return r.validateInt("Project ID",e),this.get("projects/"+e+"/data-objects",null,{dataFilter:function(e){var a=[];return $.each(r.jsonDecode(e),function(e,r){a.push({id:r.id,js_code:r.js_code,is_new:r.is_new,is_updated:r.is_updated,is_editable:r.is_editable,name:r.name,type:r.type,owner_type:r.owner_type,description:r.description,value:r[t(r.type)],date_created:r.date_created,date_updated:r.date_updated,tags:r.usage?r.usage.tags:[],rules:r.usage?r.usage.rules:[],num_tags:r.usage&&r.usage.tags?r.usage.tags.length:0,num_rules:r.usage&&r.usage.rules?r.usage.rules.length:0,variable_template:r.variable_template,parameter_name:r.parameter_name,parameter_value:r.parameter_value,twig_template:r.twig_template,vendor:r.vendor,platform:r.platform,version:r.version})}),r.jsonEncode(a)}})},r.prototype.createDataObject=function(e,a){return a[t(a.type)]=a.value,delete a.value,this.post("projects/"+e+"/data-objects",null,a,{dataFilter:function(e){var a=r.jsonDecode(e);return a.value=a[t(a.type)],delete a[t(a.type)],r.jsonEncode(a)}})},r.prototype.updateDataObject=function(e,a){var r={name:a.name,description:a.description};return r[t(a.type)]=a.value,this.put("projects/"+e+"/data-objects/"+a.id,null,r)},r.prototype.getDataObjectTypeLabel=function(e){switch(e.type){case"affinity_group_variable":return"Affinity";case"cookie_parameter_variable":return"Cookie";case"double_click_advertiser_id_variable":return"DoubleClick Advertiser";case"element_text_variable":return"Element text";case"javascript_variable":case"special_javascript_value_variable":return"JavaScript";case"query_parameter_variable":return"URL Parameter";case"string_variable":return"String";case"variable_template_variable":return e.vendor;case"rule_bound_variable":return"Rule based";case"referrer_parameter_variable":return"Referrer parameter"}return""},r.prototype.getDataObjectTypeInformation=a}(window),function(e,t){"use strict";var a=e.StSDK;a.prototype.buildUrlParams=function(e){var a={};for(var r in e)null!==e[r]&&void 0!==e[r]&&""!==e[r]&&(a[r]=e[r]);var n=t.param(a);return n?"?"+n:n}}(window,jQuery),function(e){"use strict";var t=e.StSDK;t.PROJECT_APP_FORMAT_FLAT="flat",t.PROJECT_APP_FORMAT_GROUPED_WITH_PLATFORM="grouped_with_platform",t.PROJECT_APP_FORMAT_STANDARD_WITH_PLATFORM="standard_with_platform",t.prototype.getCompaniesAndProjects=function(e,t){var a=this.buildUrlParams({limit:e,filter:t});return this.get("companies/projects"+a)},t.prototype.getProject=function(e){return t.validateInt("Project ID",e),this.get("projects/"+e)},t.prototype.getProjectDeployHistory=function(e){return t.validateInt("Project ID",e),this.get("projects/"+e+"/deployments")},t.prototype.getProjectReleaseNotes=function(e){return t.validateInt("Project ID",e),this.get("projects/"+e+"/release-notes")},t.prototype.getProjectSites=function(e){return t.validateInt("Project ID",e),this.get("projects/"+e+"/sites")},t.prototype.getProjectApplications=function(e,a){var a=a||t.PROJECT_APP_FORMAT_FLAT;return t.validateInt("Project ID",e),t.validateOpts("Format",a,[t.PROJECT_APP_FORMAT_FLAT,t.PROJECT_APP_FORMAT_GROUPED_WITH_PLATFORM,t.PROJECT_APP_FORMAT_STANDARD_WITH_PLATFORM]),this.get("projects/"+e+"/apps",null,{dataFilter:function(e,r){if(t.PROJECT_APP_FORMAT_FLAT===a||"json"!==r)return e;var n={},o=[],i=t.jsonDecode(e);return $.each(i,function(e,t){var a={},r=t.vendor.toLowerCase(),o="["+r+"]"+t.platform.toLowerCase(),i=t.tags;$.each(i,function(e,t){var r=t.templateId;r in a?a[r].push(t):a[r]=[t]}),t.tag_templates=a,delete t.tags,o in n?n[o].push(t):n[o]=[t]}),t.PROJECT_APP_FORMAT_GROUPED_WITH_PLATFORM===a?t.jsonEncode(n):($.each(n,function(e,t){o.push({platform:e,applications:t})}),t.jsonEncode(o))}})}}(window),function(e){var t=e.StSDK;t.prototype.addRule=function(e,a){t.validateInt("Project ID",e);var r={name:a.name,description:a.description,type:a.type};return"event"==a.type?(r.selector=a.selector,r.eventName=a.event_name):(r.logicalOperatorHandle=a.conditions.logicalOperatorHandle,r.children=a.conditions.children),this.post("projects/"+e+"/rule",null,r)},t.prototype.getDataObjectList=function(e){return t.validateInt("Project ID",e),this.get("projects/"+e+"/data-objects?simple=1")},t.prototype.getProjectRules=function(e){return t.validateInt("Project ID",e),this.get("projects/"+e+"/rules")},t.prototype.getProjectRulesSimpleList=function(e){return t.validateInt("Project ID",e),this.get("projects/"+e+"/rules?simple=1")},t.prototype.updateRule=function(e,a,r){return t.validateInt("Rule ID",e),this.put("projects/"+a+"/rule/"+e,null,{id:r.id,name:r.name,description:r.description,conditions:r.conditions,type:r.type,selector:r.selector,event_name:r.event_name})},t.prototype.deleteRule=function(e,a){return t.validateInt("Rule ID",e),t.validateInt("Project ID",a),this["delete"]("projects/"+a+"/rule/"+e)},t.prototype.getRuleTypeLabel=function(e){switch(e){case"business_rule":return"Business rule";case"event_container":case"event":return"Event"}return""},t.prototype.getRuleOperatorLabel=function(e){switch(e){case"logical_and":return"And";case"logical_or":return"Or"}return""},t.prototype.getRuleConditionLabel=function(e){switch(e){case"contains":return"Contains";case"ends_with":return"Ends with";case"equal":return"Equal";case"greater_than":return"Greater than";case"less_than":return"Less than";case"not_contains":return"Not contains";case"not_equal":return"Not equal";case"regex_match":return"Regex match";case"starts_with":return"Starts with"}return""},t.prototype.getRuleTypeList=function(){return["business_rule","event"]},t.prototype.getConditionLogicalOperatorList=function(){return["logical_and","logical_or"]},t.prototype.getConditionOperatorList=function(){return["contains","ends_with","equal","greater_than","less_than","not_contains","not_equal","regex_match","starts_with"]},t.prototype.getEventTypeList=function(){return["click","dblclick","focus","blur","mouseup","mousedown","load","submit","change"]},t.prototype.getEventTypeName=function(e){switch(e){case"click":return"Click";case"dblclick":return"Double Click";case"focus":return"Focus";case"blur":return"Blur";case"mouseup":return"Mouse Up";case"mousedown":return"Mouse Down";case"load":return"Load";case"submit":return"Submit";case"change":return"Change"}return""}}(window),function(e,t,a,r){"use strict";var n=e.StSDK;n.PROJECT_TAG_TREE_FORMAT_STANDARD="standard",n.PROJECT_TAG_TREE_FORMAT_KENDOUI="kendoui",n.PROJECT_TAG_ACTION_ACTIVATE="activate",n.PROJECT_TAG_ACTION_DEACTIVATE="deactivate",n.PROJECT_TAG_MOVE_POSITION_BEFORE="before",n.PROJECT_TAG_MOVE_POSITION_AFTER="after",n.PROJECT_TAG_MOVE_POSITION_OVER="over",n.prototype.getTagTree=function(e,t){function r(e){a.map(e,function(e){return e.text=e.name,"children"in e&&(e.items=e.children,delete e.children,r(e.items)),e})}n.validateInt("Project ID",e);var t=t||n.PROJECT_TAG_TREE_FORMAT_STANDARD;return n.validateOpts("Format",t,[n.PROJECT_TAG_TREE_FORMAT_STANDARD,n.PROJECT_TAG_TREE_FORMAT_KENDOUI]),this.get("projects/"+e+"/tags",null,{dataFilter:function(e,a){if(n.APP_TEMPLATE_FORMAT_STANDARD===t||"json"!==a)return e;if(e=n.jsonDecode(e),!("tag_tree"in e&&e.tag_tree))return n.jsonEncode(e);var o=e.tag_tree;return r(o),n.jsonEncode(o)}})},n.prototype.installTag=function(e,t,a){return n.validateInt("Project ID",e),n.validateInt("Tag template ID",t),n.validatePlainObj("Tag data",a),this.post("projects/"+e+"/tags/template/"+t+"?error_format=new",null,a)},n.prototype.updateTag=function(e,t){return n.validateInt("Tag ID",e),n.validatePlainObj("Tag data",t),this.put("tags/"+e+"?error_format=new",null,t)},n.prototype.deleteTag=function(e){return n.validateInt("Tag ID",e),this["delete"]("tags/"+e)},n.prototype.toggleTag=function(e,t){return n.validateInt("Project ID",e),n.validateOpts("Action",t,[n.PROJECT_TAG_ACTION_ACTIVATE,n.PROJECT_TAG_ACTION_DEACTIVATE]),n.PROJECT_TAG_ACTION_ACTIVATE===t?this.put("tags/"+e+"/activate"):this.put("tags/"+e+"/deactivate")},n.prototype.moveTag=function(e,t,a,r){n.validateInt("Project ID",e),n.validateArr("Tag IDs",t,!0);for(var o=0;o<t.length;o++)n.validateInt("Tag ID",t[o]);return n.validateInt("Target tag ID",a),n.validateOpts("Position",r,[n.PROJECT_TAG_MOVE_POSITION_BEFORE,n.PROJECT_TAG_MOVE_POSITION_AFTER,n.PROJECT_TAG_MOVE_POSITION_OVER]),this.put("projects/"+e+"/tags/move",null,{tagIds:t,targetTagId:a,nodePosition:r})}}(window,document,jQuery);
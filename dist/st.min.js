!function(t,e,n,r){"use strict";var a,o,i,s,u,p,c,l,_,T,d,A,E,O;o="https://app.supert.ag/api/",i=["dataFilter"],s=function(t){throw"ERROR: SuperTag JS SDK: "+t},u=function(t){for(var e,n,r,a,o,i,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",p="",c=0;c<t.length;)e=t.charCodeAt(c++),n=t.charCodeAt(c++),r=t.charCodeAt(c++),a=e>>2,o=(3&e)<<4|n>>4,i=(15&n)<<2|r>>6,s=63&r,isNaN(n)?i=s=64:isNaN(r)&&(s=64),p+=u.charAt(a)+u.charAt(o)+u.charAt(i)+u.charAt(s);return p},p=function(e){return r===t.JSON&&s("[Polyfill] for JSON must be provided."),t.JSON.stringify(e)},c=function(e){return r===t.JSON&&s("[Polyfill] for JSON must be provided."),t.JSON.parse(e)},l=function(t,e){r===e&&s("["+t+"] must be provided.")},_=function(t,e){return l(t,e),e!==parseInt(e)?s("["+t+"] must be an integer."):void 0},T=function(t,e){return l(t,e),"string"!==n.type(e)?s("["+t+"] must be a string."):void 0},d=function(t,e,r){return l(t,e),n.isArray(e)?!0===r&&0===e.length?s("["+t+"] must not be empty."):void 0:s("["+t+"] must be an array.")},A=function(t,e){l(t,e),e&&!n.isPlainObject(e)&&s("["+t+"] must be a plain object.")},E=function(t,e,r){T(t,e),d("Options",r);for(var a=0;a<r.length;a++)T("Option",r[a]);~n.inArray(e,r)||s("["+t+"] is not valid. Options are ["+r.join(", ")+"].")},O=function(t){A("Ajax options",t),n.each(t,function(t){~n.inArray(t,i)||s("["+t+"] is not a supported Ajax option.")})},a=function(){function t(t){A("SDK argument",t),T("Token",t.token),this.basicAuth=u("token:"+t.token),this.baseUrl=t.baseUrl||o,T("Base URL",this.baseUrl)}return t.error=s,t.jsonEncode=p,t.jsonDecode=c,t.validateDefined=l,t.validateInt=_,t.validateStr=T,t.validateArr=d,t.validatePlainObj=A,t.validateOpts=E,t.prototype.get=function(t,e,n){return this.ajax(this.getEndpoint(t,e),"GET",null,n)},t.prototype.post=function(t,e,n,r){return this.ajax(this.getEndpoint(t,e),"POST",n,r)},t.prototype.put=function(t,e,n,r){return this.ajax(this.getEndpoint(t,e),"PUT",n,r)},t.prototype["delete"]=function(t,e,n){return this.ajax(this.getEndpoint(t,e),"DELETE",null,n)},t.prototype.getEndpoint=function(t,e){return T("URI",t),e&&A("Query parameters",e),this.baseUrl+t+(e?"?"+n.param(e):"")},t.prototype.ajax=function(t,e,a,o){var t=t||this.baseUrl,e=e||"GET",i={"Content-Type":"application/json",Authorization:"Basic "+this.basicAuth},s={url:t,method:e,headers:i,dataType:"json"};return r!==a&&null!==a&&(A("Data",a),s.data=p(a)),r!==o&&(O(o),n.extend(s,o)),n.ajax(s)},t}(),t.StSDK=a}(window,document,jQuery),function(t,e,n,r){"use strict";var a=t.StSDK;a.APP_TEMPLATE_FORMAT_FLAT="flat",a.APP_TEMPLATE_FORMAT_GROUPED="grouped",a.APP_TEMPLATE_FORMAT_STANDARD="standard",a.APP_TEMPLATE_FORMAT_VENDOR_ONLY_GROUPED="vendor_only_grouped",a.APP_TEMPLATE_FORMAT_VENDOR_ONLY_STANDARD="vendor_only_standard",a.prototype.getAppTemplate=function(t){return a.validateInt("App template ID",t),this.get("app-templates/"+t)},a.prototype.createAppTemplate=function(t){return a.validatePlainObj("App template data",t),this.post("app-templates",null,t)},a.prototype.updateAppTemplate=function(t,e){return a.validateInt("App template ID",t),a.validatePlainObj("App template data",e),this.put("app-templates/"+t,null,e)},a.prototype.deleteAppTemplate=function(t){return a.validateInt("ID",t),this["delete"]("app-templates/"+t)},a.prototype.getAppTemplates=function(t){var t=t||a.APP_TEMPLATE_FORMAT_FLAT;return a.validateOpts("Format",t,[a.APP_TEMPLATE_FORMAT_FLAT,a.APP_TEMPLATE_FORMAT_GROUPED,a.APP_TEMPLATE_FORMAT_STANDARD,a.APP_TEMPLATE_FORMAT_VENDOR_ONLY_GROUPED,a.APP_TEMPLATE_FORMAT_VENDOR_ONLY_STANDARD]),this.get("app-templates",null,{dataFilter:function(e,r){if(a.APP_TEMPLATE_FORMAT_FLAT===t||"json"!==r)return e;var o={},i=[],s={},u=[],p=a.jsonDecode(e);return n.each(p,function(t,e){var n=e.vendor,r=e.platform;n in o?r in o[n]?o[n][r].push(e):o[n][r]=[e]:(o[n]={},o[n][r]=[e]),n in s?s[n].push(e):s[n]=[e]}),a.APP_TEMPLATE_FORMAT_GROUPED===t?a.jsonEncode(o):a.APP_TEMPLATE_FORMAT_VENDOR_ONLY_GROUPED===t?a.jsonEncode(s):a.APP_TEMPLATE_FORMAT_STANDARD===t?(n.each(o,function(t,e){var r=[];n.each(e,function(t,e){r.push({name:t,applications:e})}),i.push({name:t,platforms:r})}),a.jsonEncode(i)):(n.each(s,function(t,e){u.push({vendor:t,applications:e})}),a.jsonEncode(u))}})}}(window,document,jQuery),function(t){"use strict";var e=t.StSDK;e.prototype.getCompany=function(t){return e.validateInt("Company ID",t),this.get("companies/"+t)}}(window),function(t){"use strict";var e=t.StSDK;e.prototype.getProjectDataObjects=function(t){return e.validateInt("Project ID",t),this.get("projects/"+t+"/data-objects")},e.prototype.getDataObjectTypeLabel=function(t){switch(t.type){case"affinity_group_variable":return"Affinity";case"cookie_parameter_variable":return"Cookie";case"double_click_advertiser_id_variable":return"DoubleClick Advertiser";case"element_text_variable":return"Element text";case"javascript_variable":case"special_javascript_value_variable":return"JavaScript";case"query_parameter_variable":return"URL Parameter";case"string_variable":return"String";case"variable_template_variable":return t.vendor;case"rule_bound_variable":return"Rule based";case"referrer_parameter_variable":return"Referrer parameter"}return""}}(window),function(t,e){"use strict";var n=t.StSDK;n.prototype.buildUrlParams=function(t){var n={};for(var r in t)null!==t[r]&&void 0!==t[r]&&""!==t[r]&&(n[r]=t[r]);var a=e.param(n);return a?"?"+a:a}}(window,jQuery),function(t){"use strict";var e=t.StSDK;e.prototype.getCompaniesAndProjects=function(t,e){var n=this.buildUrlParams({limit:t,filter:e});return this.get("companies/projects"+n)},e.prototype.getProject=function(t){return e.validateInt("Project ID",t),this.get("projects/"+t)},e.prototype.getProjectDeployHistory=function(t){return e.validateInt("Project ID",t),this.get("projects/"+t+"/deployments")},e.prototype.getProjectReleaseNotes=function(t){return e.validateInt("Project ID",t),this.get("projects/"+t+"/release-notes")}}(window),function(t){var e=t.StSDK;e.prototype.addRule=function(t,n){e.validateInt("Project ID",t);var r={name:n.name,description:n.description,type:n.type};return"event"==n.type?(r.selector=n.selector,r.eventName=n.event_name):(r.logicalOperatorHandle=n.conditions.logicalOperatorHandle,r.children=n.conditions.children),this.post("projects/"+t+"/rule",null,r)},e.prototype.getDataObjectList=function(t){return e.validateInt("Project ID",t),this.get("projects/"+t+"/data-object-list")},e.prototype.getProjectRules=function(t){return e.validateInt("Project ID",t),this.get("projects/"+t+"/rules")},e.prototype.updateRule=function(t,n,r){return e.validateInt("Rule ID",t),this.put("projects/"+n+"/rule/"+t,null,{id:r.id,name:r.name,description:r.description,conditions:r.conditions,type:r.type,selector:r.selector,event_name:r.event_name})},e.prototype.getRuleTypeLabel=function(t){switch(t){case"business_rule":return"Business rule";case"event_container":case"event":return"Event"}return""},e.prototype.getRuleOperatorLabel=function(t){switch(t){case"logical_and":return"And";case"logical_or":return"Or"}return""},e.prototype.getRuleConditionLabel=function(t){switch(t){case"contains":return"Contains";case"ends_with":return"Ends with";case"equal":return"Equal";case"greater_than":return"Greater than";case"less_than":return"Less than";case"not_contains":return"Not contains";case"not_equal":return"Not equal";case"regex_match":return"Regex match";case"starts_with":return"Starts with"}return""},e.prototype.getRuleTypeList=function(){return["business_rule","event"]},e.prototype.getConditionLogicalOperatorList=function(){return["logical_and","logical_or"]},e.prototype.getConditionOperatorList=function(){return["contains","ends_with","equal","greater_than","less_than","not_contains","not_equal","regex_match","starts_with"]}}(window),function(t,e,n,r){"use strict";var a=t.StSDK;a.PROJECT_TAG_TREE_FORMAT_STANDARD="standard",a.PROJECT_TAG_TREE_FORMAT_KENDOUI="kendoui",a.PROJECT_TAG_ACTION_ACTIVATE="activate",a.PROJECT_TAG_ACTION_DEACTIVATE="deactivate",a.PROJECT_TAG_MOVE_POSITION_BEFORE="before",a.PROJECT_TAG_MOVE_POSITION_AFTER="after",a.PROJECT_TAG_MOVE_POSITION_OVER="over",a.prototype.getTagTree=function(t,e){function r(t){n.map(t,function(t){return t.text=t.name,"children"in t&&(t.items=t.children,delete t.children,r(t.items)),t})}a.validateInt("Project ID",t);var e=e||a.PROJECT_TAG_TREE_FORMAT_STANDARD;return a.validateOpts("Format",e,[a.PROJECT_TAG_TREE_FORMAT_STANDARD,a.PROJECT_TAG_TREE_FORMAT_KENDOUI]),this.get("projects/"+t+"/tags",null,{dataFilter:function(t,n){if(a.APP_TEMPLATE_FORMAT_STANDARD===e||"json"!==n)return t;if(t=a.jsonDecode(t),!("tag_tree"in t&&t.tag_tree))return a.jsonEncode(t);var o=t.tag_tree;return r(o),a.jsonEncode(o)}})},a.prototype.installTag=function(t,e,n){return a.validateInt("Project ID",t),a.validateInt("Tag template ID",e),a.validatePlainObj("Tag data",n),this.post("projects/"+t+"/tags/template/"+e,null,n)},a.prototype.deleteTag=function(t){return a.validateInt("Tag ID",t),this["delete"]("tags/"+t)},a.prototype.toggleTag=function(t,e){return a.validateInt("Project ID",t),a.validateOpts("Action",e,[a.PROJECT_TAG_ACTION_ACTIVATE,a.PROJECT_TAG_ACTION_DEACTIVATE]),a.PROJECT_TAG_ACTION_ACTIVATE===e?this.put("tags/"+t+"/activate"):this.put("tags/"+t+"/deactivate")},a.prototype.moveTag=function(t,e,n,r){a.validateInt("Project ID",t),a.validateArr("Tag IDs",e,!0);for(var o=0;o<e.length;o++)a.validateInt("Tag ID",e[o]);return a.validateInt("Target tag ID",n),a.validateOpts("Position",r,[a.PROJECT_TAG_MOVE_POSITION_BEFORE,a.PROJECT_TAG_MOVE_POSITION_AFTER,a.PROJECT_TAG_MOVE_POSITION_OVER]),this.put("projects/"+t+"/tags/move",null,{tagIds:e,targetTagId:n,nodePosition:r})}}(window,document,jQuery);
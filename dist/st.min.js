!function(t,e,r,a){"use strict";var n,o,i,s,u,c,p,l,_,T,d,A,P,O;o="https://app.supert.ag/api/",i=["dataFilter"],s=function(t){throw"ERROR: SuperTag JS SDK: "+t},u=function(t){for(var e,r,a,n,o,i,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",p=0;p<t.length;)e=t.charCodeAt(p++),r=t.charCodeAt(p++),a=t.charCodeAt(p++),n=e>>2,o=(3&e)<<4|r>>4,i=(15&r)<<2|a>>6,s=63&a,isNaN(r)?i=s=64:isNaN(a)&&(s=64),c+=u.charAt(n)+u.charAt(o)+u.charAt(i)+u.charAt(s);return c},c=function(e){return a===t.JSON&&s("[Polyfill] for JSON must be provided."),t.JSON.stringify(e)},p=function(e){return a===t.JSON&&s("[Polyfill] for JSON must be provided."),t.JSON.parse(e)},l=function(t,e){a===e&&s("["+t+"] must be provided.")},_=function(t,e){return l(t,e),e!==parseInt(e)?s("["+t+"] must be an integer."):void 0},T=function(t,e){return l(t,e),"string"!==r.type(e)?s("["+t+"] must be a string."):void 0},d=function(t,e,a){return l(t,e),r.isArray(e)?!0===a&&0===e.length?s("["+t+"] must not be empty."):void 0:s("["+t+"] must be an array.")},A=function(t,e){l(t,e),e&&!r.isPlainObject(e)&&s("["+t+"] must be a plain object.")},P=function(t,e,a){T(t,e),d("Options",a);for(var n=0;n<a.length;n++)T("Option",a[n]);~r.inArray(e,a)||s("["+t+"] is not valid. Options are ["+a.join(", ")+"].")},O=function(t){A("Ajax options",t),r.each(t,function(t){~r.inArray(t,i)||s("["+t+"] is not a supported Ajax option.")})},n=function(){function t(t){A("SDK argument",t),T("Token",t.token),this.basicAuth=u("token:"+t.token),this.baseUrl=t.baseUrl||o,T("Base URL",this.baseUrl)}return t.error=s,t.jsonEncode=c,t.jsonDecode=p,t.validateDefined=l,t.validateInt=_,t.validateStr=T,t.validateArr=d,t.validatePlainObj=A,t.validateOpts=P,t.prototype.get=function(t,e,r){return this.ajax(this.getEndpoint(t,e),"GET",null,r)},t.prototype.post=function(t,e,r,a){return this.ajax(this.getEndpoint(t,e),"POST",r,a)},t.prototype.put=function(t,e,r,a){return this.ajax(this.getEndpoint(t,e),"PUT",r,a)},t.prototype["delete"]=function(t,e,r){return this.ajax(this.getEndpoint(t,e),"DELETE",null,r)},t.prototype.getEndpoint=function(t,e){return T("URI",t),e&&A("Query parameters",e),this.baseUrl+t+(e?"?"+r.param(e):"")},t.prototype.ajax=function(t,e,n,o){var t=t||this.baseUrl,e=e||"GET",i={"Content-Type":"application/json",Authorization:"Basic "+this.basicAuth},s={url:t,method:e,headers:i,dataType:"json"};return a!==n&&null!==n&&(A("Data",n),s.data=c(n)),a!==o&&(O(o),r.extend(s,o)),r.ajax(s)},t}(),t.StSDK=n}(window,document,jQuery),function(t,e,r,a){"use strict";var n=t.StSDK;n.APP_TEMPLATE_FORMAT_FLAT="flat",n.APP_TEMPLATE_FORMAT_GROUPED="grouped",n.APP_TEMPLATE_FORMAT_GROUPED_APP_ONLY="grouped_app_only",n.APP_TEMPLATE_FORMAT_GROUPED_VENDOR_ONLY="grouped_vendor_only",n.APP_TEMPLATE_FORMAT_STANDARD="standard",n.APP_TEMPLATE_FORMAT_STANDARD_VENDOR_ONLY="standard_vendor_only",n.prototype.getAppTemplate=function(t){return n.validateInt("App template ID",t),this.get("app-templates/"+t)},n.prototype.createAppTemplate=function(t){return n.validatePlainObj("App template data",t),this.post("app-templates",null,t)},n.prototype.updateAppTemplate=function(t,e){return n.validateInt("App template ID",t),n.validatePlainObj("App template data",e),this.put("app-templates/"+t,null,e)},n.prototype.deleteAppTemplate=function(t){return n.validateInt("ID",t),this["delete"]("app-templates/"+t)},n.prototype.getAppTemplates=function(t){var t=t||n.APP_TEMPLATE_FORMAT_FLAT;return n.validateOpts("Format",t,[n.APP_TEMPLATE_FORMAT_FLAT,n.APP_TEMPLATE_FORMAT_GROUPED,n.APP_TEMPLATE_FORMAT_GROUPED_APP_ONLY,n.APP_TEMPLATE_FORMAT_GROUPED_VENDOR_ONLY,n.APP_TEMPLATE_FORMAT_STANDARD,n.APP_TEMPLATE_FORMAT_STANDARD_VENDOR_ONLY]),this.get("app-templates",null,{dataFilter:function(e,a){if(n.APP_TEMPLATE_FORMAT_FLAT===t||"json"!==a)return e;var o={},i={},s={},u=[],c=[],p=n.jsonDecode(e);return r.each(p,function(t,e){var a=e.vendor.toLowerCase(),n=e.platform.toLowerCase(),u=e.id,c={};a in o?n in o[a]?o[a][n].push(e):o[a][n]=[e]:(o[a]={},o[a][n]=[e]),a in s?s[a].push(e):s[a]=[e],r.each(e.tag_templates,function(t,e){e.id in c||(c[e.id]=e)}),delete e.tag_templates,e.tag_templates=c,u in i||(i[u]=e)}),n.APP_TEMPLATE_FORMAT_GROUPED===t?n.jsonEncode(o):n.APP_TEMPLATE_FORMAT_GROUPED_APP_ONLY===t?n.jsonEncode(i):n.APP_TEMPLATE_FORMAT_GROUPED_VENDOR_ONLY===t?n.jsonEncode(s):n.APP_TEMPLATE_FORMAT_STANDARD===t?(r.each(o,function(t,e){var a=[];r.each(e,function(t,e){a.push({name:t,applications:e})}),u.push({name:t,platforms:a})}),n.jsonEncode(u)):(r.each(s,function(t,e){c.push({vendor:t,applications:e})}),n.jsonEncode(c))}})}}(window,document,jQuery),function(t){"use strict";var e=t.StSDK;e.prototype.getCompany=function(t){return e.validateInt("Company ID",t),this.get("companies/"+t)}}(window),function(t){"use strict";function e(t){switch(t){case"cookie_parameter_variable":return"cookie_name";case"element_text_variable":return"element_selector";case"javascript_variable":case"special_javascript_value_variable":return"variable_name";case"query_parameter_variable":return"query_string_key";case"double_click_advertiser_id_variable":case"string_variable":return"value";case"referrer_parameter_variable":return"referrer_parameter_key";case"variable_template_variable":return"parameter_value";case"affinity_group_variable":throw"Not implemented";case"rule_bound_variable":throw"Not implemented";default:throw"Undefined type"}}var r=t.StSDK;r.prototype.getProjectDataObjects=function(t){return r.validateInt("Project ID",t),this.get("projects/"+t+"/data-objects")},r.prototype.createDataObject=function(t,r){return r[e(r.type)]=r.value,delete r.value,this.post("projects/"+t+"/data-objects",null,r)},r.prototype.updateDataObject=function(t,r){var a={name:r.name,description:r.description};return a[e(r.type)]=r.value,this.put("projects/"+t+"/data-objects/"+r.id,null,a)},r.prototype.getDataObjectTypeLabel=function(t){switch(t.type){case"affinity_group_variable":return"Affinity";case"cookie_parameter_variable":return"Cookie";case"double_click_advertiser_id_variable":return"DoubleClick Advertiser";case"element_text_variable":return"Element text";case"javascript_variable":case"special_javascript_value_variable":return"JavaScript";case"query_parameter_variable":return"URL Parameter";case"string_variable":return"String";case"variable_template_variable":return t.vendor;case"rule_bound_variable":return"Rule based";case"referrer_parameter_variable":return"Referrer parameter"}return""}}(window),function(t,e){"use strict";var r=t.StSDK;r.prototype.buildUrlParams=function(t){var r={};for(var a in t)null!==t[a]&&void 0!==t[a]&&""!==t[a]&&(r[a]=t[a]);var n=e.param(r);return n?"?"+n:n}}(window,jQuery),function(t){"use strict";var e=t.StSDK;e.PROJECT_APP_FORMAT_FLAT="flat",e.PROJECT_APP_FORMAT_GROUPED_WITH_PLATFORM="grouped_with_platform",e.PROJECT_APP_FORMAT_STANDARD_WITH_PLATFORM="standard_with_platform",e.prototype.getCompaniesAndProjects=function(t,e){var r=this.buildUrlParams({limit:t,filter:e});return this.get("companies/projects"+r)},e.prototype.getProject=function(t){return e.validateInt("Project ID",t),this.get("projects/"+t)},e.prototype.getProjectDeployHistory=function(t){return e.validateInt("Project ID",t),this.get("projects/"+t+"/deployments")},e.prototype.getProjectReleaseNotes=function(t){return e.validateInt("Project ID",t),this.get("projects/"+t+"/release-notes")},e.prototype.getProjectSites=function(t){return e.validateInt("Project ID",t),this.get("projects/"+t+"/sites")},e.prototype.getProjectApplications=function(t,r){var r=r||e.PROJECT_APP_FORMAT_FLAT;return e.validateInt("Project ID",t),e.validateOpts("Format",r,[e.PROJECT_APP_FORMAT_FLAT,e.PROJECT_APP_FORMAT_GROUPED_WITH_PLATFORM,e.PROJECT_APP_FORMAT_STANDARD_WITH_PLATFORM]),this.get("projects/"+t+"/apps",null,{dataFilter:function(t,a){if(e.PROJECT_APP_FORMAT_FLAT===r||"json"!==a)return t;var n={},o=[],i=e.jsonDecode(t);return $.each(i,function(t,e){var r={},a=e.platform.toLowerCase(),o=e.tags;$.each(o,function(t,e){var a=e.templateId;a in r?r[a].push(e):r[a]=[e]}),e.tag_templates=r,delete e.tags,a in n?n[a].push(e):n[a]=[e]}),e.PROJECT_APP_FORMAT_GROUPED_WITH_PLATFORM===r?e.jsonEncode(n):($.each(n,function(t,e){o.push({platform:t,applications:e})}),e.jsonEncode(o))}})}}(window),function(t){var e=t.StSDK;e.prototype.addRule=function(t,r){e.validateInt("Project ID",t);var a={name:r.name,description:r.description,type:r.type};return"event"==r.type?(a.selector=r.selector,a.eventName=r.event_name):(a.logicalOperatorHandle=r.conditions.logicalOperatorHandle,a.children=r.conditions.children),this.post("projects/"+t+"/rule",null,a)},e.prototype.getDataObjectList=function(t){return e.validateInt("Project ID",t),this.get("projects/"+t+"/data-objects?simple=1")},e.prototype.getProjectRules=function(t){return e.validateInt("Project ID",t),this.get("projects/"+t+"/rules")},e.prototype.updateRule=function(t,r,a){return e.validateInt("Rule ID",t),this.put("projects/"+r+"/rule/"+t,null,{id:a.id,name:a.name,description:a.description,conditions:a.conditions,type:a.type,selector:a.selector,event_name:a.event_name})},e.prototype.getRuleTypeLabel=function(t){switch(t){case"business_rule":return"Business rule";case"event_container":case"event":return"Event"}return""},e.prototype.getRuleOperatorLabel=function(t){switch(t){case"logical_and":return"And";case"logical_or":return"Or"}return""},e.prototype.getRuleConditionLabel=function(t){switch(t){case"contains":return"Contains";case"ends_with":return"Ends with";case"equal":return"Equal";case"greater_than":return"Greater than";case"less_than":return"Less than";case"not_contains":return"Not contains";case"not_equal":return"Not equal";case"regex_match":return"Regex match";case"starts_with":return"Starts with"}return""},e.prototype.getRuleTypeList=function(){return["business_rule","event"]},e.prototype.getConditionLogicalOperatorList=function(){return["logical_and","logical_or"]},e.prototype.getConditionOperatorList=function(){return["contains","ends_with","equal","greater_than","less_than","not_contains","not_equal","regex_match","starts_with"]},e.prototype.getEventTypeList=function(){return["click","dblclick","focus","blur","mouseup","mousedown","load","submit","change"]},e.prototype.getEventTypeName=function(t){switch(t){case"click":return"Click";case"dblclick":return"Double Click";case"focus":return"Focus";case"blur":return"Blur";case"mouseup":return"Mouse Up";case"mousedown":return"Mouse Down";case"load":return"Load";case"submit":return"Submit";case"change":return"Change"}return""}}(window),function(t,e,r,a){"use strict";var n=t.StSDK;n.PROJECT_TAG_TREE_FORMAT_STANDARD="standard",n.PROJECT_TAG_TREE_FORMAT_KENDOUI="kendoui",n.PROJECT_TAG_ACTION_ACTIVATE="activate",n.PROJECT_TAG_ACTION_DEACTIVATE="deactivate",n.PROJECT_TAG_MOVE_POSITION_BEFORE="before",n.PROJECT_TAG_MOVE_POSITION_AFTER="after",n.PROJECT_TAG_MOVE_POSITION_OVER="over",n.prototype.getTagTree=function(t,e){function a(t){r.map(t,function(t){return t.text=t.name,"children"in t&&(t.items=t.children,delete t.children,a(t.items)),t})}n.validateInt("Project ID",t);var e=e||n.PROJECT_TAG_TREE_FORMAT_STANDARD;return n.validateOpts("Format",e,[n.PROJECT_TAG_TREE_FORMAT_STANDARD,n.PROJECT_TAG_TREE_FORMAT_KENDOUI]),this.get("projects/"+t+"/tags",null,{dataFilter:function(t,r){if(n.APP_TEMPLATE_FORMAT_STANDARD===e||"json"!==r)return t;if(t=n.jsonDecode(t),!("tag_tree"in t&&t.tag_tree))return n.jsonEncode(t);var o=t.tag_tree;return a(o),n.jsonEncode(o)}})},n.prototype.installTag=function(t,e,r){return n.validateInt("Project ID",t),n.validateInt("Tag template ID",e),n.validatePlainObj("Tag data",r),this.post("projects/"+t+"/tags/template/"+e+"?error_format=new",null,r)},n.prototype.deleteTag=function(t){return n.validateInt("Tag ID",t),this["delete"]("tags/"+t)},n.prototype.toggleTag=function(t,e){return n.validateInt("Project ID",t),n.validateOpts("Action",e,[n.PROJECT_TAG_ACTION_ACTIVATE,n.PROJECT_TAG_ACTION_DEACTIVATE]),n.PROJECT_TAG_ACTION_ACTIVATE===e?this.put("tags/"+t+"/activate"):this.put("tags/"+t+"/deactivate")},n.prototype.moveTag=function(t,e,r,a){n.validateInt("Project ID",t),n.validateArr("Tag IDs",e,!0);for(var o=0;o<e.length;o++)n.validateInt("Tag ID",e[o]);return n.validateInt("Target tag ID",r),n.validateOpts("Position",a,[n.PROJECT_TAG_MOVE_POSITION_BEFORE,n.PROJECT_TAG_MOVE_POSITION_AFTER,n.PROJECT_TAG_MOVE_POSITION_OVER]),this.put("projects/"+t+"/tags/move",null,{tagIds:e,targetTagId:r,nodePosition:a})}}(window,document,jQuery);